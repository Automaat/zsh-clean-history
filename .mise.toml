[tools]
python = "3.11"
shellcheck = "0.10.0"
actionlint = "1.7.4"

[env]
_.python.venv = { path = ".venv", create = true }

[tasks.install]
description = "Install Python dependencies"
run = ["pip install --upgrade pip", "pip install -r requirements-dev.txt"]

[tasks.test]
description = "Run tests"
run = "python -m pytest -v test_clean_history.py"

[tasks.test-cov]
description = "Run tests with coverage"
run = "python -m pytest --cov=. --cov-report=xml --cov-report=term test_clean_history.py"

[tasks.check]
description = "Run linters (ruff, pyrefly, actionlint)"
run = [
  "ruff check *.py",
  "pyrefly check *.py",
  "actionlint",
]

[tasks.lint]
description = "Run Ruff linter with auto-fix"
run = "ruff check --fix ."

[tasks.format]
description = "Format code with Ruff"
run = "ruff format ."
